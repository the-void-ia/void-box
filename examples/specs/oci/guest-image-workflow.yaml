api_version: v1
kind: workflow
name: guest-image-test

sandbox:
  mode: auto
  memory_mb: 512
  vcpus: 2
  # Pull kernel + initramfs from this OCI image (no local build needed).
  # For local testing: localhost:5555/voidbox-guest:v0.1.0
  # For production:    ghcr.io/the-void-ia/voidbox-guest:v0.1.0
  guest_image: "ghcr.io/the-void-ia/voidbox-guest:v0.1.1"

workflow:
  steps:
    - name: hello
      run:
        program: echo
        args: ["hello from guest image"]

    - name: upcase
      depends_on: [hello]
      run:
        program: tr
        args: ["a-z", "A-Z"]
        stdin_from: hello

  output_step: upcase
